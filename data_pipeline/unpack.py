import os
#TODO:
#


#.py for extracting and parsing the Smali code.
bump_enabled = False
bumper = 100

def prep_files(list_of_apps):
    concat = ""
    print("--- Starting OS Walk ... ---")
    print()
    print()
    
    
    for apper in list_of_apps:

        #list of smali files
        filer = []

        print("Starting OS walk for app " + apper)
        c= 0
        for root, dirs, files in os.walk(apper, topdown=False):
            for name in files:
                if bump_enabled == True:
                    if c == bumper: #adjust for limiting processing time
                        break
                    else:
                        if name[-6:] == ".smali":
                            filer.append(str(os.path.join(root, name)))
                            c = c + 1
                else:
                    if name[-6:] == ".smali":
                            filer.append(str(os.path.join(root, name)))


        #print("Starting Smali Concat ....") 
        #print()
        for k in filer:
            f = open(k, "r")
            holder = str(f.read())
            concat = concat + "/n" + holder

        concat = concat + "----- END OF APP -----"
        
    #print()
    #print("--- Concat Complete ---")

    return concat