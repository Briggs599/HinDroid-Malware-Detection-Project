import os
import re
import numpy as np
import pandas as pd
import pickle
import json

#ToDO all:
# get pipeline working
# create more stable data extraction
# add comments
# move all magic number and params to data-params.json



#customs
from model.model import *
from structures import *
from unpack import *

concat = prep_files("data")



invoke_df = happy_invoke_df.join([insta_invoke_df, microsoft_invoke_df, subway_invoke_df, worm_invoke_df, mal1_invoke_df, mal2_invoke_df, mal3_invoke_df, mal4_invoke_df], how='outer').fillna(0)
invoke_df = invoke_df.T
invoke_df

#dataframe where each row is an API call and each column is an app 
api_df = happy_df.join([insta_df, micro_df, subway_df, worm_df, mal1_df, mal2_df, mal3_df, mal4_df], how='outer')
api_df = api_df.T.fillna(0) 



labels = [0, 0, 0, 0, 0, 1, 1, 1, 1] # can't hardcode
df_feats = api_df.join(invoke_df, how='outer')
df_feats['label'] = labels
pd.to_csv("features_df",df_feats,)

log_model(df_feats)
